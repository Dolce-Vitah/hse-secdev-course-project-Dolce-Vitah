|   **ID**   | **Название**                                 | **Описание**                                                                                                                                      | **Метрика / Порог**                                                                       | **Проверка (чем / где)**                                                                                       | **Компонент**                          | **Приоритет** |
| :--------: |:---------------------------------------------| :------------------------------------------------------------------------------------------------------------------------------------------------ |:------------------------------------------------------------------------------------------| :------------------------------------------------------------------------------------------------------------- |:---------------------------------------| :-----------: |
| **NFR-01** | **JWT TTL и отзыв токенов**                  | Длительность жизни access JWT и механизм отзыва. Access токен должен быть короткоживущим, refresh — опционален. Отозванные токены не принимаются. | Access TTL ≤ 15 минут; lookup revoked tokens ≤ 1 ms при 1000 запросах/сек                 | Интеграционные и нагрузочные тесты; ручное тестирование revocation; CI проверка поведения при истечении/отзыве | **Auth (JWT, revocation store)**       |    **High**   |
| **NFR-02** | **Хеширование паролей (Argon2id)**           | Пароли хранятся только в виде безопасного хеша с современными параметрами Argon2id.                                                               | Argon2id: memory ≥ 64 MB, iterations ≥ 2, parallelism ≥ 1; время 100–500 мс               | Unit / integration test, локальный bench на CI                                                                 | **Auth (password hashing)**            |    **High**   |
| **NFR-03** | **IDOR — owner-only доступ**                 | Пользователь может читать/обновлять/удалять **только свои** wishes.                                                                               | 0 успешных попыток доступа к чужим ресурсам; покрытие тестами ≥ 95%                       | Автоматические тесты API (pytest); security/fuzz тесты                                                         | **API (wishes endpoints)**             |  **Critical** |
| **NFR-04** | **Время ответа API**                         | Быстродействие под нормальной нагрузкой.                                                                                                          | p95 latency (GET / api/v1/wishes, POST /auth/login) ≤ 200 мс                              | Нагрузочные тесты (locust/k6) в staging; CI smoke тесты с p95 метрикой                                         | **API, DB**                            |   **Medium**  |
| **NFR-05** | **Устойчивость к ошибкам / SLA ошибок**      | Под нагрузкой процент 5xx минимален; ошибки обрабатываются грейсфул.                                                                              | % ошибок 5xx ≤ 0.5% при RPS 100; единый формат ошибок                                     | Нагрузочные + интеграционные тесты; мониторинг (Sentry, metrics)                                               | **API, DB**                            |    **High**   |
| **NFR-06** | **Уязвимости — время реакции**               | Срок исправления High/Critical уязвимостей.                                                                                                       | High/Critical ≤ 7 дн.; Medium ≤ 30 дн.                                                    | Сканы (dependabot, OS scans); tracking issues; отчёт о закрытии                                                | **CI / Deps / Security**               |    **High**   |
| **NFR-07** | **Rate limiting / brute-force защита**       | Ограничение неудачных логинов и RPS на пользователя.                                                                                              | ≤ 5 ошибочных логинов / 15 мин на IP; блокировка 15 мин; RPS ≤ 20 на польз.               | Интеграционные тесты (симуляция brute-force); мониторинг rate-limit счётчиков                                  | **Auth, API gateway**                  |    **High**   |
| **NFR-08** | **Логи и аудит доступа**                     | Логирование аутентификаций, CRUD, revocations с user_id, action, resource_id, timestamp, ip.                                                      | Логирование ≤ 200 мс после операции; retention 90 дней; экспорт в Sentry/ELK              | Проверка логов в тестах; unit тесты логгера; верификация формата                                               | **Logging / Audit**                    |   **Medium**  |
| **NFR-09** | **SQL Injection / input validation**         | Входные данные валидируются; ORM/параметризованные запросы                                                                                        | 0 обнаруженных SQLi в автоматическом сканировании; все входы проходят валидацию (pydantic)| Static analysis, DAST/DAST scans, security tests                                                               | **API, DB**                            |   **Critical**|
